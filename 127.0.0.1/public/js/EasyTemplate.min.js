var EasyTemplate;(function(){"use strict";var e,t;e=function(n,r,i,s){var o,u,a;o=Object.create(t,{window:{value:n.defaultView},document:{value:n},namespaceURI:{value:n.documentElement.namespaceURI},state:{value:undefined,writable:true},documents:{value:{}},queue:{value:[]},titleSuffix:{value:r},activeClassName:{value:i},activeClassPattern:{value:new RegExp("[^s]?(s?"+i+")(?!S)")},ontemplateload:{value:s}});a=o.select("."+i);if(a){u=o.state=o.parseState(a.getAttribute("href"));u.statusText="200 OK"}else{u=o.state=o.parseState(n.location.href);u.statusText=u.title.substring(0,u.title.length-r.length)}o.state.title=o.document.title;o.append(function(){o.createTemplate(o.createContainer(o.state),n);o.window.addEventListener("popstate",function(t){var n;n=t.state;if(n&&n.url!==o.state.url){o.append(function(){var e,t,r,i,s;o.state=n;o[o.documents[n.href]===undefined?"load":"show"](n,false)})}},false);n.addEventListener("click",function(e){var t,n,r;t=e.target;if(t.nodeName==="A"&&t.target!=="_blank"&&(t.download===null||t.download==="")){n=o.state;r=o.parseState(t.getAttribute("href"));if(r.hostname===n.hostname&&r.url!==n.url||r.url===n.url&&r.hash===""){o.state=r;o.append(function(){if(o.documents[r.href]===undefined){o.load(r,true)}else{r.statusText="200 OK";o.show(r,true)}});e.preventDefault();e.returnValue=false;return false}}},false);o.shift(o.state)});o.window.history.replaceState(u,u.title,u.qualifiedHref)};t={parseState:function(t){var n,r,i;n=this.document.createElement("span");n.innerHTML='<a href="'+t.split('&').join('&amp;').split('"').join('&quot;').split('<').join('&lt;')+'"> </a>';r=n.firstChild.href;i=r.split("#")[0];return Object.create({},{href:{value:t,enumerable:true},qualifiedHref:{value:r,enumerable:true},hostname:{value:r.split("//")[1].split("/")[0].split(":")[0],enumerable:true},url:{value:i,enumerable:true},hash:{value:r.substring(i.length),enumerable:true}})},pushState:function(t){t.title=this.document.title;this.window.history.pushState(t,t.title,t.qualifiedHref)},append:function(t){this.queue.push(t);this.call()},call:function(){var t;t=this.queue;if(t.length===1){t[0]()}},shift:function(t){try{this.ontemplateload(t)}catch(n){}this.queue.shift();this.call()},active:function(t){var n,r,i;n=this.activeClassName;r=this.select("a."+n);i=this.select('a[href="'+t.href+'"]');if(i!==r){if(r){r.className=r.className.replace(this.activeClassPattern,"")}if(i){i.className+=" "+n}}return i},select:function(t,n){return this.document["querySelector"+(!!n?"All":"")](t)},load:function(t,n){var r,i;r=this;if(r.documents[t.href]===undefined){i=new XMLHttpRequest;i.open("GET",t.url,true);i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.onreadystatechange=function(){if(i.readyState===4){if([200,400,401,402,403,404,408,500,502,503,504].indexOf(i.status)>-1){t.statusText=i.status+" "+i.statusText;r.createTemplate(r.createContainer(t,i.responseText));r.show(t,n)}}};i.send(null)}else{r.show(t,n)}},createContainer:function(t,n){var r;r=this.document.implementation.createDocument(this.namespaceURI,"tpl",null).firstChild;r.innerHTML=n||"";r.state=t;return this.documents[t.href]=r},createTemplate:function(t,n){var r,i,s;n=n||t;r=n.querySelector("*[data-tpl-selector]")||n.documentElement;i=r.getAttribute("data-tpl-selector");t.selector=i!==""&&i!==null?decodeURI(i):"html";r.removeAttribute("data-tpl-selector");s=parseInt(r.getAttribute("data-tpl-expire"),10);t.expire=!isNaN(s)?(new Date).getTime()+s:0;return t.tpl=r},show:function(t,n){var r,i,s,o,u,a,f;r=t.href;i=this.documents[r];if(t.statusText==="200 OK"&&(!i.expire||i.expire>(new Date).getTime())){s=this.select(i.selector);o=s.parentNode;u=s.nextSibling;a=i.tpl;this.resetForms(a);f=this.select("a."+this.activeClassName);this.documents[f?f.getAttribute("href"):this.state.href].appendChild(s);if(u){o.insertBefore(a,u)}else{o.appendChild(a)}this.document.title=(this.active(t).textContent||t.statusText)+this.titleSuffix;t.title=this.document.title;if(n){this.pushState(t)}this.shift(t)}else{this.documents[r]=undefined;this.load(t,n)}},resetForms:function(t){var n,r,i;n=t.querySelectorAll('form:not([data-tpl-noreset="true"])');i=n.length;for(r=0;r<i;r+=1){n[r].reset()}}};self.EasyTemplate=e})()